{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StaticSmith - Django App</title>
    <link rel="stylesheet" href="{% static 'staticsmith/css/styles.css' %}">
    <style>
        .input-row { display: flex; align-items: center; gap: 5px; margin-top: 5px; }
        input[type="range"] { flex-grow: 1; cursor: pointer; }
        input[type="number"] { width: 50px; padding: 2px; background: #eee; border: 1px solid #999; border-radius: 3px; text-align: center; font-size: 11px; font-weight: bold; color: #333; }
        #btnPlayPause { width: 100%; background: #228B22; color: white; padding: 8px; border: none; cursor: pointer; font-weight: bold; margin-bottom: 15px; border-radius: 4px; }
        #btnPlayPause:hover { background: #1e7a1e; }
    </style>
</head>
<body>
    <div id="sidebar">
        <h1>StaticSmith</h1>
        <div class="separator"></div>

        <div class="info-row"><span class="label">Title:</span> <span id="lblTitle">...</span></div>
        <div class="info-row"><span class="label">Artist:</span> <span id="lblArtist">...</span></div>
        <div class="info-row"><span class="label">Time:</span> <span id="lblTime">0:00</span></div>

        <button id="btnPlayPause">▶ Play</button>

        <div class="control-group">
            <div class="info-row"><span class="label">Zoom Scale:</span></div>
            <div class="input-row">
                <input type="range" id="zoomSlider" min="0.2" max="3.0" step="0.1" value="1.0">
                <input type="number" id="zoomInput" min="0.2" max="3.0" step="0.1" value="1.0">
            </div>
            <p style="font-size:10px; color:#666; margin-top:2px;">(Hover+Ctrl+Wheel to Zoom Main/Mini)</p>
        </div>

        <div class="control-group">
            <div class="info-row"><span class="label">Scroll Sensitivity:</span></div>
            <div class="input-row">
                <input type="range" id="speedSlider" min="1" max="10" step="1" value="5">
                <input type="number" id="speedInput" min="1" max="10" value="5">
            </div>
        </div>

        <div class="control-group">
            <div class="info-row"><span class="label">Playback Speed (%):</span></div>
            <div class="input-row">
                <input type="range" id="autoSpeedSlider" min="10" max="200" step="1" value="50">
                <input type="number" id="autoSpeedInput" min="10" max="200" value="50">
            </div>
            <p style="font-size:10px; color:#666; margin-top:2px;">(Shift + / - for 1% adjustments)</p>
        </div>

        <div class="control-group">
            <span class="label">Difficulty:</span>
            <select id="selDifficulty" disabled><option>Load File First...</option></select>
        </div>

        <div class="control-group" style="border-top: 2px solid #999; margin-top: 20px; padding-top: 10px;">
            <span class="label" style="color:#000;">Saved Library:</span>
            <select id="selLibrary" style="margin-bottom: 5px; width: 100%;">
                <option value="">Loading...</option>
            </select>
            <button id="btnLoadSaved" class="custom-file-upload" style="width:100%; text-align:center; margin-top:5px;">Load Selected</button>
        </div>

        <div class="control-group">
             <button id="btnSaveCurrent" class="custom-file-upload" style="width:100%; background:#4444aa; display:none;">Save to Library</button>
        </div>

        <div class="file-upload">
            <label for="file-upload" class="custom-file-upload">Upload XML File</label>
            <input id="file-upload" type="file" accept=".xml"/>
        </div>

        <p style="font-size:10px; color:#555; margin-top:10px; line-height:1.4;">
            <strong>StaticSmith v3.2 (Modular)</strong><br>
            • Shift+Click Mini to Loop<br>
            • Ctrl+Wheel to Zoom
        </p>
    </div>

    <div id="main-view">
        <div id="top-bar">
            <span>File &nbsp; View &nbsp; Tools &nbsp; Help</span>
            <span style="font-weight:bold; color:#666;">Django Integration</span>
        </div>

        <div id="canvas-wrapper">
            <canvas id="fretboardCanvas"></canvas>
            <div id="loading">Processing...</div>
        </div>

        <div id="minimap-container">
            <canvas id="minimapCanvas"></canvas>
        </div>
    </div>

    <script type="module" src="{% static 'staticsmith/js/main.js' %}"></script>

</body>
</html>